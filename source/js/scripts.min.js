const player = document.querySelector('.player-1');
const video1 = player.querySelector('.viewer-1');
const progress1 = player.querySelector('.progress-1');
const progressBar1 = player.querySelector(['.progress__filled-1']);

function togglePlay() {
	video1[video1.paused ? 'play' : 'pause']()
}

function handleProgress() {
	const percent = (video1.currentTime / video1.duration) * 100;
	progressBar1.style.flexBasis = `${percent}%`
}

function scrub(e) {
	const scrubTime = (e.offsetX / progress1.offsetWidth) * video1.duration;
	video1.currentTime = scrubTime
}
video1.addEventListener('click', togglePlay);
video1.addEventListener('timeupdate', handleProgress);
let mousedown = !1;
progress1.addEventListener('click', scrub);
progress1.addEventListener('mousemove', e => mousedown && scrub(e));
progress1.addEventListener('mousedown', () => {
	mousedown = !0
});
progress1.addEventListener('mouseup', () => {
	mousedown = !1
});
$('#carouselProduced').carousel({
  interval: !1
})
$('#carouselStandingIndicators').carousel({
  interval: !1
})
$('#carouselExamplePhotoIndicators').carousel({
  interval: !1
})
$('#carouselReviewsIndicators').carousel({
  interval: !1
})
$('#carouselAdvantages').carousel({
  interval: 3000
})

function sendEmail() {
	var myform = $('form#form-request');
	var params = myform.serializeArray().reduce(function (obj, item) {
		obj[item.name] = item.value;
		return obj
	}, {});
	event.preventDefault();
	myform.find('button').text('Отправляем...');
	emailjs.send('default_service', 'tents', params).then(function () {
		$('#request').modal('hide');
		$('#thanks').modal('show');
		myform.find('button').text('отправить заявку')
	}, function (err) {
		alert('Send email failed!\r\n Response:\n ' + JSON.stringify(err));
		myform.find('button').text('отправить заявку')
	})
}(function () {
	emailjs.init('user_DNIJakmte9ZrjJG8xKmUY')
})();
(function () {
	var forms = document.getElementsByClassName('form-request');
	window.addEventListener('load', function () {
		var validation = Array.prototype.filter.call(forms, function (form) {
			form.addEventListener('submit', function (event) {
				if (form.checkValidity() === !1) {
					event.preventDefault();
					event.stopPropagation()
				}
				if (form.checkValidity()) {
					sendEmail();
					yaCounter49334587.reachGoal('skilltolead');
				}
				form.classList.add('was-validated')
			}, !1)
		})
	}, !1)
})();
$('#phone').mask('+7(999) 999-9999');
$(document).ready(function () {
	var waterwheel = $('#waterwheel ').waterwheelCarousel({
		flankingItems: 3,
		opacityMultiplier: 1,
		separation: 200,
	});
	$('#prev').bind('click', function () {
		waterwheel.prev();
		return !1
	});
	$('#next').bind('click', function () {
		waterwheel.next();
		return !1
	})
});
new WOW({
	offset: 20,
	mobile: !1,
	live: false,
}).init();
check.checked = true;
agree.addEventListener('click', function () {
	return check.checked = true;
})
unmuteButton.addEventListener('click', function () {
	autoVideo.muted === false ? autoVideo.muted = true : autoVideo.muted = false;
	off.classList.toggle('hidden');
	on.classList.toggle('hidden');
	autoVideo.volume = 0.5;
}, {passive: false});

$(document).ready(function () {
	$(".carousel-inner").swipe({
		swipeLeft: function (event, direction, distance, duration, fingerCount) {
			$(this).parent().carousel('prev');
		},
		swipeRight: function () {
			$(this).parent().carousel('next');
		},
		threshold: 0
	});
});

;(function() {
	// Initialize
	var bLazy = new Blazy({
		offset: 500
	})
	$('.carousel').on('slide.bs.carousel', function () {
		new Blazy()
	
	})
	$('.carousel').on('slid.bs.carousel', function () {
		new Blazy()
	})
})();



// var element1 = document.querySelector('#autoVideo-1');
// var Visible = function (target) {
// 	var targetPosition = {
// 			top: window.pageYOffset + target.getBoundingClientRect().top,
// 			left: window.pageXOffset + target.getBoundingClientRect().left,
// 			right: window.pageXOffset + target.getBoundingClientRect().right,
// 			bottom: window.pageYOffset + target.getBoundingClientRect().bottom,
// 		},
// 		windowPosition = {
// 			top: window.pageYOffset,
// 			left: window.pageXOffset,
// 			right: window.pageXOffset + document.documentElement.clientWidth,
// 			bottom: window.pageYOffset + document.documentElement.clientHeight,
// 		};
// 	if (targetPosition.bottom > windowPosition.top && targetPosition.top < windowPosition.bottom && targetPosition.right > windowPosition.left && targetPosition.left < windowPosition.right) {
// 		target.muted === false

// 		target.play()
// 	} else {
// 		target.pause()
// 	}
// };
// window.addEventListener('scroll', function () {
// 	Visible(element1)
// });
// Visible(element1);